<html>
    <head>
        <title>safety-edish</title>

        <meta http-equiv = 'Content-Type' content = 'text/html; charset = utf-8'>

        <script type = 'text/javascript' src = 'https://d3js.org/d3.v3.min.js'></script>
        <script type = 'text/javascript' src = 'https://rawgit.com/RhoInc/Webcharts/master/build/webcharts.js'></script>
        <script type = 'text/javascript' src = '../build/safetyedish.js'></script>
        <link type = 'text/css' rel = 'stylesheet' href = 'https://rawgit.com/RhoInc/Webcharts/master/css/webcharts.min.css'>

    </head>

    <body>
        <div id = 'container'></div>
    </body>

    <script type = 'text/javascript'>
        let settings = {
          r_ratio_cut:1,
          r_ratio_filter:false,
          max_width:600,
          value_col:"AVAL",
          measure_col:"PARAM",
          visitn_col:"VISITNUM",
          studyday_col:"ADY",
          normal_col_low: 'A1LO',
          normal_col_high: 'A1HI',
          id_col: 'USUBJID',
          group_cols:["TRTA","RACE","AGEGR1"],
          filters:[
            {
              value_col:"TRTA",
              label:"Treatment"
            },
            {
              value_col:"SEX",
              label:"Sex"
            },
            {
              value_col:"RACE",
              label:"Race"
            },
            {
              value_col:"AGEGR1",
              label:"Age group"
            },
          ],
          measure_details: [
              {
                  label: 'ALT',
                  measure: 'Alanine Aminotransferase (U/L)',
                  axis: 'x',
                  imputation:"data-driven",
                  cut: {
                      relative_uln: 3,
                      absolute: 3.8,
                      relative_baseline:3.8
                  }
              },
              {
                  label: 'ALP',
                  measure: 'Alkaline Phosphatase (U/L)',
                  axis: 'z', //used to fill circles
                  imputation:"data-driven",
                  cut: {
                      relative_uln: 3,
                      absolute: 3,
                      relative_baseline:3.8
                  }
              },
              {
                  label: 'TB',
                  measure: 'Bilirubin (umol/L)',
                  axis: 'y',
                  imputation:"data-driven",
                  cut: {
                      relative_uln: 2,
                      absolute: 2,
                      relative_baseline:4.8
                  }
              }
          ]
        }

        let chart = safetyedish('#container', settings);
        d3.csv('adlbhy.csv', function(data) {
            chart.init(data);
        });
    </script>
</html>
